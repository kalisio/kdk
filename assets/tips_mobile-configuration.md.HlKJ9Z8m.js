import{_ as e,c as i,o as s,V as t}from"./chunks/framework.MC2QjGNi.js";const k=JSON.parse('{"title":"Mobile configuration","description":"","frontmatter":{},"headers":[],"relativePath":"tips/mobile-configuration.md","filePath":"tips/mobile-configuration.md"}'),a={name:"tips/mobile-configuration.md"},o=t(`<h1 id="mobile-configuration" tabindex="-1">Mobile configuration <a class="header-anchor" href="#mobile-configuration" aria-label="Permalink to &quot;Mobile configuration&quot;">​</a></h1><h2 id="ios" tabindex="-1">IOs <a class="header-anchor" href="#ios" aria-label="Permalink to &quot;IOs&quot;">​</a></h2><h3 id="renew-ios-push-certificates" tabindex="-1">Renew iOS Push Certificates <a class="header-anchor" href="#renew-ios-push-certificates" aria-label="Permalink to &quot;Renew iOS Push Certificates&quot;">​</a></h3><p>Because the <strong>KDK</strong> relies on <a href="https://aws.amazon.com/sns/?nc1=h_ls&amp;whats-new-cards.sort-by=item.additionalFields.postDateTime&amp;whats-new-cards.sort-order=desc" target="_blank" rel="noreferrer">SNS</a> to manage mobile push notifications, you must:</p><ol><li>Create a new iOS push certificate</li></ol><ul><li>Go to <a href="https://developer.apple.com/" target="_blank" rel="noreferrer">https://developer.apple.com/</a></li><li>Click <strong>Certificates, Identifiers &amp; Profiles</strong></li><li>Click <strong>+</strong> on the right side of the <strong>Certificates</strong> label</li><li>Under Production section, select <strong>Apple Push Notification service SSL (Sandbox &amp; Production)</strong> and click <strong>Continue</strong></li><li>Select the AppId (build Identifier of iOS application) and click <strong>Continue</strong></li><li>Upload you CSR file or create a new one if needed and click <strong>Continue</strong></li><li>Download the created certificate</li></ul><ol start="2"><li>Obtain the app private key (.p12 File) for SNS</li></ol><ul><li>Open <strong>Keychain access</strong> by double clicking the create certificate in the previous step</li><li>Select the certificcate and export it</li><li>Accept the default <strong>.p12</strong> file format, provide a password and then click <strong>Save</strong>.</li></ul><ol start="3"><li>Update your SNS Application platform</li></ol><ul><li>Go to <a href="https://console.aws.amazon.com/sns/" target="_blank" rel="noreferrer">https://console.aws.amazon.com/sns/</a></li><li>Click the corresponding application platform and click <strong>Modify</strong></li><li>Under certificate type, select <strong>iOS push certificate</strong></li><li>Under certificate, click to upload the created private key (.p12 file)</li><li>Under password, enter the password you assigned to the p12 file when exporting it</li><li>Click <strong>Load Credentials form file</strong></li><li>Click <strong>Save changes</strong></li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>The following procedure must be performed for each flavor: <code>dev</code>, <code>test</code> and <code>prod</code>.</p></div><h3 id="debug-provisioning-profile" tabindex="-1">Debug provisioning profile <a class="header-anchor" href="#debug-provisioning-profile" aria-label="Permalink to &quot;Debug provisioning profile&quot;">​</a></h3><p>In order to debug a cordova application you will need to use a develoment provisiong profile due to some <a href="https://webkit.org/web-inspector/enabling-web-inspector/" target="_blank" rel="noreferrer">restrictions</a>. You can do this directly through your Apple Developer account without a Mac/XCode but you will need a Certificate Signing Request first. To generate it you can use <code>openssl</code>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>openssl genrsa -out ios-dev.key 2048</span></span>
<span class="line"><span>openssl req -new -key ios-dev.key -out ios-dev.csr</span></span></code></pre></div><p>Use the following properties to generate the signing request:</p><ul><li>C = Your country code e.g. FR</li><li>O = Entity name of your Apple Developer account e.g. KALISIO</li><li>OU = Team ID of your Apple Developer account e.g. V456HYJKLI</li><li>CN = Account Holder of your Apple Developer account e.g John Doe</li><li>Email Address = Email Address of your Apple Developer account</li></ul><p>Then, create an iOS development certificate with your Apple Developer account and the generated CSR.</p><p>Before creating the provisioning profile you will need to register the devices associated with it. Connect your device(s) and use iTunes to display the(ir) UDID in order to register it on your Apple Developer account.</p><p>Last, update your <code>build.json</code> to change the <code>packageType</code> and provisioning profile ID:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;ios&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;release&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;codeSignIdentity&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;iPhone Developer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;provisioningProfile&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;developmentTeam&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;yyy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;packageType&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;development&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>If you&#39;d like to check the content of a provisioning profile here is the command to extract the plist file from it: <code>openssl smime -inform der -verify -noverify -in file.mobileprovision</code></p><blockquote><p>Note that you cannot push applications with a development profile on the store so that you will need to install the IPA manually on your device using iTunes.</p></blockquote><h3 id="certificates-tips" tabindex="-1">Certificates tips <a class="header-anchor" href="#certificates-tips" aria-label="Permalink to &quot;Certificates tips&quot;">​</a></h3><p>If you need to create a PKCS12 file from a certificate you first need to convert it to PEM format:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>openssl x509 -inform der -in ios-dev.cer -out ios-dev.pem</span></span>
<span class="line"><span>openssl pkcs12 -export -out ios-dev.p12 -inkey ios-dev.key -in ios-dev.pem -passin pass:password -passout pass:password</span></span></code></pre></div><p>If you&#39;d like to view the content of a certificate:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>openssl x509 -in ios-dev.cer -inform der -text</span></span>
<span class="line"><span>// p12 file</span></span>
<span class="line"><span>openssl pkcs12 -in ios-dev.p12 -nodes -passin pass:password | openssl x509 -noout -subject</span></span></code></pre></div>`,27),n=[o];function l(p,r,c,d,h,u){return s(),i("div",null,n)}const f=e(a,[["render",l]]);export{k as __pageData,f as default};
