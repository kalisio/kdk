(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{508:function(t,s,a){t.exports=a.p+"assets/img/kano-3D.85e3276b.png"},560:function(t,s,a){"use strict";a.r(s);var e=a(13),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"overview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[t._v("#")]),t._v(" Overview")]),t._v(" "),e("p",[t._v("The map module includes basic features to create web mapping applications: "),e("RouterLink",{attrs:{to:"/api/map/services.html#geocoder-service"}},[t._v("geocoding")]),t._v(", "),e("RouterLink",{attrs:{to:"/api/map/services.html#catalog-service"}},[t._v("data catalog")]),t._v(", "),e("RouterLink",{attrs:{to:"/api/map/services.html#feature-service"}},[t._v("dynamic feature layers")]),t._v(", "),e("RouterLink",{attrs:{to:"/api/map/components.html#map"}},[t._v("2D visualisation")]),t._v(", "),e("RouterLink",{attrs:{to:"/api/map/components.html#globe"}},[t._v("3D visualisation")]),t._v(".")],1),t._v(" "),e("p",[e("img",{attrs:{src:a(508),alt:"3D web mapping application built with the KDK"}})]),t._v(" "),e("h2",{attrs:{id:"utilities"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#utilities"}},[t._v("#")]),t._v(" Utilities")]),t._v(" "),e("h3",{attrs:{id:"functions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#functions"}},[t._v("#")]),t._v(" Functions")]),t._v(" "),e("p",[t._v("Here are a set of utility functions:")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("generatePropertiesSchema (geoJson, name)")]),t._v(" generate a JSON schema from the given GeoJson features")]),t._v(" "),e("li",[e("strong",[t._v("fetchGeoJson (dataSource, processor)")]),t._v(" fetch GeoJson features from the given source and apply processor function (if any) on each feature")]),t._v(" "),e("li",[e("strong",[t._v("getNearestTime (time, times)")]),t._v(" find the nearest time of a given one in a given moment time list")]),t._v(" "),e("li",[e("strong",[t._v("getTimeInterval (times, mode = 'minimum')")]),t._v(" find the minimum or maximum time interval in a given moment time list")])]),t._v(" "),e("h3",{attrs:{id:"store-objects"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#store-objects"}},[t._v("#")]),t._v(" Store objects")]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("locationFormat")]),t._v(" property of the "),e("RouterLink",{attrs:{to:"/api/core/application.html#store"}},[t._v("global store")]),t._v(" is used to have a shared location display format accross all mapping components with a dedicated UI to change settings using e.g. "),e("code",[t._v("store.patch('locationFormat', 'FFf')")]),t._v(".")],1),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("The location format object to be used for display supports "),e("a",{attrs:{href:"https://github.com/nerik/formatcoords",target:"_blank",rel:"noopener noreferrer"}},[t._v("formatcoords"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("p",[t._v("The "),e("code",[t._v("timeFormat")]),t._v(" property of the "),e("RouterLink",{attrs:{to:"/api/core/application.html#store"}},[t._v("global store")]),t._v(" is used to have a shared time display format accross all mapping components with a dedicated UI to change settings using e.g.")],1),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("patch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'timeFormat'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("time")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("short")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'H[h]'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("long")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'HH:mm'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("date")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("short")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'DD/MM'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("long")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dddd D'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("year")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("short")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YY'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("long")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'YYYY'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("utc")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("locale")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" utils"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLocale")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("The time format object properties to be used for display supports "),e("a",{attrs:{href:"https://momentjs.com/docs/#/displaying/format/",target:"_blank",rel:"noopener noreferrer"}},[t._v("momentjs formats"),e("OutboundLink")],1),t._v(".")])]),t._v(" "),e("p",[t._v("In addition, the "),e("RouterLink",{attrs:{to:"/api/core/application.html#store"}},[t._v("global store")]),t._v(" contains the following defaults objects:")],1),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("selection")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("location")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" current picked position on map"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("feature")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" currently selected feature on map"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("layer")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" source layer "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" currently selected feature\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Default view settings")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("restore")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("view")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("layers")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Default timeline parameters")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timeline")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("step")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1H")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Default timeseries parameters")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timeseries")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("span")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1440")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 24H")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"geolocation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#geolocation"}},[t._v("#")]),t._v(" Geolocation")]),t._v(" "),e("p",[t._v("Your component can automatically retrieve the user's location on initialization or when he has logged in (the "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("Geolocation API"),e("OutboundLink")],1),t._v(" is used under-the-hood). The position, respectively error, is available in the "),e("code",[t._v("position")]),t._v(", respectively "),e("code",[t._v("error")]),t._v(", property of the "),e("code",[t._v("geolocation")]),t._v(" object in the "),e("RouterLink",{attrs:{to:"/api/core/application.html#store"}},[t._v("global store")]),t._v(".")],1),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Geolocation "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@kalisio/kdk/map.client'")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Launch a geolocation")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" Geolocation"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" position "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$store"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'geolocation.position'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);