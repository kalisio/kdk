(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{563:function(e,t,o){"use strict";o.r(t);var r=o(13),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"hooks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#hooks"}},[e._v("#")]),e._v(" Hooks")]),e._v(" "),o("h2",{attrs:{id:"query"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[e._v("#")]),e._v(" Query")]),e._v(" "),o("h3",{attrs:{id:"asgeojson-options"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#asgeojson-options"}},[e._v("#")]),e._v(" asGeoJson(options)")]),e._v(" "),o("blockquote",[o("p",[e._v("Return a hook function according to provided options")])]),e._v(" "),o("p",[e._v("Transform the hook results into a "),o("a",{attrs:{href:"https://tools.ietf.org/html/rfc7946",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJson"),o("OutboundLink")],1),e._v(" object:")]),e._v(" "),o("ul",[o("li",[o("strong",[e._v("force")]),e._v(": set to "),o("code",[e._v("true")]),e._v(" to perform transformation whatever hook parameters, otherwise this hook will only be run when "),o("code",[e._v("hook.params.asGeoJson")]),e._v(" is "),o("code",[e._v("true")]),e._v(" (default)")]),e._v(" "),o("li",[o("strong",[e._v("longitudeProperty")]),e._v(": name of the field where to read the longitude on result items")]),e._v(" "),o("li",[o("strong",[e._v("latitudeProperty")]),e._v(": name of the field where to read the latitude on result items")]),e._v(" "),o("li",[o("strong",[e._v("altitudeProperty")]),e._v(": name of the field where to read the altitude on result items")]),e._v(" "),o("li",[o("strong",[e._v("pick")]),e._v(": an array of properties to be picked on result items using "),o("a",{attrs:{href:"https://lodash.com/docs#pick",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lodash"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("strong",[e._v("omit")]),e._v(": an array of properties to be omitted on result items using "),o("a",{attrs:{href:"https://lodash.com/docs#omit",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lodash"),o("OutboundLink")],1)]),e._v(" "),o("li",[o("strong",[e._v("properties")]),e._v(": a map between input key path and output key path supporting dot notation, a value of the map is a structure like this:\n"),o("ul",[o("li",[o("strong",[e._v("from")]),e._v(": input key path")]),e._v(" "),o("li",[o("strong",[e._v("to")]),e._v(": output key path (defaults to input path if not given)")]),e._v(" "),o("li",[o("strong",[e._v("delete")]),e._v(": boolean indicating if the input key path should be deleted or not after mapping")])])]),e._v(" "),o("li",[o("strong",[e._v("asFeatureCollection")]),e._v(": true to output a "),o("a",{attrs:{href:"https://tools.ietf.org/html/rfc7946#page-12",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJson feature collection"),o("OutboundLink")],1),e._v(" (default) otherwise will generate an array of "),o("a",{attrs:{href:"https://tools.ietf.org/html/rfc7946#page-11",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJson features"),o("OutboundLink")],1)])]),e._v(" "),o("h3",{attrs:{id:"marshallspatialquery-hook"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#marshallspatialquery-hook"}},[e._v("#")]),e._v(" marshallSpatialQuery(hook)")]),e._v(" "),o("p",[e._v("Converts from client/server side spatial types (e.g. coordinates or numbers) to basic JS types, which is usually required when querying the database. Applies to "),o("a",{attrs:{href:"https://docs.mongodb.com/manual/reference/operator/query-geospatial/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MongoDB geospatial operators"),o("OutboundLink")],1),e._v(". It also manages "),o("RouterLink",{attrs:{to:"/api/map/services.html#./services.md#advanced-feature-filtering"}},[e._v("shortcuts to create spatial queries")]),e._v(" for features in a given area.")],1),e._v(" "),o("p",[e._v("Also set "),o("code",[e._v("hook.params.asGeoJson")]),e._v(" to "),o("code",[e._v("true")]),e._v(" when "),o("code",[e._v("hook.query.geoJson")]),e._v(" is "),o("code",[e._v("true")]),e._v(" (see above).")]),e._v(" "),o("h3",{attrs:{id:"aggregatefeaturesquery-hook"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#aggregatefeaturesquery-hook"}},[e._v("#")]),e._v(" aggregateFeaturesQuery(hook)")]),e._v(" "),o("p",[e._v("Constructs query for feature "),o("RouterLink",{attrs:{to:"/api/map/services.html#time-based-feature-aggregation"}},[e._v("aggregation over time")]),e._v(".")],1),e._v(" "),o("blockquote",[o("p",[e._v("Reads the query object to process from "),o("code",[e._v("hook.params.query.$aggregate")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);