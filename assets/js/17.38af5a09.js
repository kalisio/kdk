(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{513:function(e,t,a){e.exports=a.p+"assets/img/marker-cluster-2D.63ae3032.png"},564:function(e,t,a){"use strict";a.r(t);var r=a(13),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"map-mixins"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#map-mixins"}},[e._v("#")]),e._v(" Map Mixins")]),e._v(" "),r("p",[e._v("The underlying map object is based on "),r("a",{attrs:{href:"http://leafletjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet"),r("OutboundLink")],1),e._v(" and some mixins also rely on "),r("a",{attrs:{href:"https://leafletjs.com/plugins.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet plugins"),r("OutboundLink")],1),e._v(". The following set of mixins is to be used to construct a new map activity and underlying Leaflet objects.")]),e._v(" "),r("h2",{attrs:{id:"base-map"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#base-map"}},[e._v("#")]),e._v(" Base Map")]),e._v(" "),r("div",{staticClass:"custom-block danger"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("This mixin is a mandatory one to build a map activity")])]),e._v(" "),r("p",[e._v("Make it possible to manage map layers and extend supported layer types:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("setupMap(domElement, options)")]),e._v(" creates the underlying Leaflet map object with given options")]),e._v(" "),r("li",[r("strong",[e._v("addLayer(options)/removeLayer(name)")]),e._v(" registers/destroys a layer based on a "),r("RouterLink",{attrs:{to:"/api/map/services.html#catalog-service"}},[e._v("catalog layer descriptor")])],1),e._v(" "),r("li",[r("strong",[e._v("showLayer/hideLayer(name)")]),e._v(" (un)hides the given layer in map, on first show the layer will be lazily created")]),e._v(" "),r("li",[r("strong",[e._v("hasLayer(name)")]),e._v(" check if a given layer is already registered")]),e._v(" "),r("li",[r("strong",[e._v("isLayerVisible(name)")]),e._v(" check if a given layer is visible and underlying Leaflet object created")]),e._v(" "),r("li",[r("strong",[e._v("zoomToLayer(name)")]),e._v(" fits the map view to visualize a given layer")]),e._v(" "),r("li",[r("strong",[e._v("zoomToBounds(bounds)")]),e._v(" fits the map view to visualize a given extent as bounds [ [south, west], [north, east] ]")]),e._v(" "),r("li",[r("strong",[e._v("getLayerByName(name)")]),e._v(" retrieve the "),r("RouterLink",{attrs:{to:"/api/map/services.html#catalog-service"}},[e._v("catalog layer descriptor")]),e._v(" for a given layer")],1),e._v(" "),r("li",[r("strong",[e._v("renameLayer(previousName, newName)")]),e._v(" rename a given layer")]),e._v(" "),r("li",[r("strong",[e._v("removeLayer(name)")]),e._v(" destroys a given layer")]),e._v(" "),r("li",[r("strong",[e._v("getLeafletLayerByName(name)")]),e._v(" retrieve the underlying Leaflet object for a given layer")]),e._v(" "),r("li",[r("strong",[e._v("createLeafletLayer(options)")]),e._v(" creates the underlying Leaflet object based on a "),r("RouterLink",{attrs:{to:"/api/map/services.html#catalog-service"}},[e._v("catalog layer descriptor")]),e._v(", will check all registered constructor for any one matching")],1),e._v(" "),r("li",[r("strong",[e._v("getLeafletPaneByName(name)")]),e._v(" retrieve the underlying Leaflet object for a given pane")]),e._v(" "),r("li",[r("strong",[e._v("createLeafletPane(name)")]),e._v(" creates the underlying Leaflet object for a pane")]),e._v(" "),r("li",[r("strong",[e._v("removeLeafletPane(name)")]),e._v(" destroys the underlying Leaflet object for a given pane")]),e._v(" "),r("li",[r("strong",[e._v("registerLeafletConstructor(constructor)")]),e._v(" registers a Leaflet constructor function for a given type of layer")]),e._v(" "),r("li",[r("strong",[e._v("center(longitude, latitude, zoomLevel)")]),e._v(" centers the map view to visualize a given point at a given zoom level")]),e._v(" "),r("li",[r("strong",[e._v("getCenter()")]),e._v(" get the current map view center as longitude, latitude and zoom level")]),e._v(" "),r("li",[r("strong",[e._v("getBounds()")]),e._v(" get the current map view bounds as "),r("code",[e._v("[ [south, west], [north, east] ]")])]),e._v(" "),r("li",[r("strong",[e._v("setCurrentTime(datetime)")]),e._v(" sets the current time to be used for time-based visualisation (e.g. weather forecast data or dynamic features)")])]),e._v(" "),r("p",[e._v("This mixin also adds the following internal data properties:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("layers")]),e._v(" available layers as "),r("RouterLink",{attrs:{to:"/api/map/services.html#catalog-service"}},[e._v("catalog layer descriptors")])],1)]),e._v(" "),r("p",[e._v("This mixin automatically includes some Leaflet plugins: "),r("a",{attrs:{href:"https://github.com/danwild/leaflet-fa-markers",target:"_blank",rel:"noopener noreferrer"}},[e._v("leaflet-fa-markers"),r("OutboundLink")],1),e._v(" to create markers using Font Awesome icons, "),r("a",{attrs:{href:"https://github.com/Leaflet/Leaflet.fullscreen",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet.fullscreen"),r("OutboundLink")],1),e._v(" to manage fullscreen mode, "),r("a",{attrs:{href:"https://github.com/Leaflet/Leaflet.markercluster",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet.markercluster"),r("OutboundLink")],1),e._v(" to create marker clusters, "),r("a",{attrs:{href:"https://github.com/Leaflet/Leaflet.VectorGrid",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet.VectorGrid"),r("OutboundLink")],1),e._v(" to display "),r("a",{attrs:{href:"https://github.com/mapbox/vector-tile-spec",target:"_blank",rel:"noopener noreferrer"}},[e._v("vector tiles"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("h3",{attrs:{id:"managing-panes"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#managing-panes"}},[e._v("#")]),e._v(" Managing panes")]),e._v(" "),r("p",[e._v("Although DOM-based layers like "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#marker",target:"_blank",rel:"noopener noreferrer"}},[e._v("Markers"),r("OutboundLink")],1),e._v(" could make use of a "),r("code",[e._v("z-index")]),e._v(" to possibly manage render order between them, SVG or canvas-based layers used to manage "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#geojson",target:"_blank",rel:"noopener noreferrer"}},[e._v("GeoJson features"),r("OutboundLink")],1),e._v(" like "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#polyline",target:"_blank",rel:"noopener noreferrer"}},[e._v("Polylines"),r("OutboundLink")],1),e._v(" provided no mean to do so. Similarly, there was no simple way to render some layers only at some specific zoom levels. This is the reason why Leaflet 1.0 introduced the concept of "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#map-pane",target:"_blank",rel:"noopener noreferrer"}},[e._v("panes"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("p",[e._v("If you add a "),r("code",[e._v("zIndex")]),e._v(" option to your layer descriptor we will create a dedicated pane for you under-the-hood so that the layer will be rendered at its right rank. Check the "),r("code",[e._v("z-index")]),e._v(" value of "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#map-pane",target:"_blank",rel:"noopener noreferrer"}},[e._v("the default panes"),r("OutboundLink")],1),e._v(" to select the appropriate one.")]),e._v(" "),r("p",[e._v("If you add a "),r("code",[e._v("panes")]),e._v(" option to your layer descriptor we will create the dedicated panes for you under-the-hood so that you can then set in the "),r("code",[e._v("pane")]),e._v(" option of any sublayer the pane it will belong to. Each pane must have a unique name and can be visible at specific zoom levels:")]),e._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  name"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Layer'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("...")]),e._v("\n  panes"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    name"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'waypoints'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    minZoom"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("7")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    maxZoom"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("14")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),r("h2",{attrs:{id:"map-style"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#map-style"}},[e._v("#")]),e._v(" Map Style")]),e._v(" "),r("p",[e._v("Make it possible to generate Leaflet map objects with style based on (Geo)Json (feature) properties:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("convertFromSimpleStyleSpec(style)")]),e._v(" helper function to convert from "),r("a",{attrs:{href:"https://github.com/mapbox/simplestyle-spec",target:"_blank",rel:"noopener noreferrer"}},[e._v("simple style spec options"),r("OutboundLink")],1),e._v(" to "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#path-option",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet style options"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("strong",[e._v("createMarkerFromStyle(latlng, style)")]),e._v(" helper function create a "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#marker",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet marker"),r("OutboundLink")],1),e._v(" from marker style options:\n"),r("ul",[r("li",[r("strong",[e._v("icon")]),e._v(" icon style options\n"),r("ul",[r("li",[r("strong",[e._v("type")]),e._v(" type name (ie constructor function) of the icon to be created for the marker, e.g. "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#icon",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("icon")]),r("OutboundLink")],1),e._v(" (defaults), "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#divicon",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("divIcon")]),r("OutboundLink")],1),e._v(" or "),r("a",{attrs:{href:"https://github.com/danwild/leaflet-fa-markers",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("icon.fontAwesome")]),r("OutboundLink")],1)]),e._v(" "),r("li",[r("strong",[e._v("options")]),e._v(" icon constructor options")])])]),e._v(" "),r("li",[r("strong",[e._v("type")]),e._v(" type name (ie constructor function) of the marker to be created, e.g. "),r("code",[e._v("marker")]),e._v(" (defaults) or "),r("code",[e._v("circleMarker")])]),e._v(" "),r("li",[r("strong",[e._v("options")]),e._v(" marker constructor options")])])])]),e._v(" "),r("p",[e._v("Use "),r("strong",[e._v("register/unregisterStyle(type, generator)")]),e._v(" to (un)register a function generating a Leaflet object depending on the given type:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("markerStyle")]),e._v(" => "),r("strong",[e._v("f(feature, latlng, options)")]),e._v(" returns a "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#marker",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet marker"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("code",[e._v("featureStyle")]),e._v(" => "),r("strong",[e._v("f(feature, options)")]),e._v(" returns a "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#path-option",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet style object"),r("OutboundLink")],1)])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("The "),r("a",{attrs:{href:"https://github.com/mapbox/simplestyle-spec",target:"_blank",rel:"noopener noreferrer"}},[e._v("simple style spec options"),r("OutboundLink")],1),e._v(" does not cover all "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#path-option",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet style options"),r("OutboundLink")],1),e._v(". However you can use it simply by converting option names from camel case to kebab case.")])]),e._v(" "),r("p",[e._v("Our mapping extends the simple style spec and can be used to create styles more easily:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("weight")]),e._v(": mapped as "),r("code",[e._v("weight")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("radius")]),e._v(": mapped as "),r("code",[e._v("radius")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("line-cap")]),e._v(": mapped as "),r("code",[e._v("lineCap")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("line-join")]),e._v(": mapped as "),r("code",[e._v("lineJoin")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("dash-array")]),e._v(": mapped as "),r("code",[e._v("dashArray")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("dash-offset")]),e._v(": mapped as "),r("code",[e._v("dashOffset")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("marker-size")]),e._v(": mapped as "),r("code",[e._v("icon.options.iconSize")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("marker-symbol")]),e._v(": mapped as "),r("code",[e._v("icon.options.iconUrl")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("marker-type")]),e._v(": mapped as "),r("code",[e._v("type")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("icon-size")]),e._v(": mapped as "),r("code",[e._v("icon.options.iconSize")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("icon-anchor")]),e._v(": mapped as "),r("code",[e._v("icon.options.iconAnchor")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("icon-class")]),e._v(": mapped as "),r("code",[e._v("icon.options.className")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("icon-html")]),e._v(": mapped as "),r("code",[e._v("icon.options.html")]),e._v(" and automatically switch to "),r("code",[e._v("divIcon")]),e._v(" constructor function,")]),e._v(" "),r("li",[r("code",[e._v("icon-classes")]),e._v(": mapped as "),r("code",[e._v("icon.options.iconClasses")]),e._v(" and automatically switch to "),r("code",[e._v("icon.fontAwesome")]),e._v(" constructor function,")]),e._v(" "),r("li",[r("code",[e._v("marker-color")]),e._v(": mapped as "),r("code",[e._v("icon.options.markerColor")]),e._v(" for "),r("code",[e._v("icon.fontAwesome")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("icon-color")]),e._v(": mapped as "),r("code",[e._v("icon.options.iconColor")]),e._v(" for "),r("code",[e._v("icon.fontAwesome")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("icon-x-offset")]),e._v(": mapped as "),r("code",[e._v("icon.options.iconXOffset")]),e._v(" for "),r("code",[e._v("icon.fontAwesome")]),e._v(",")]),e._v(" "),r("li",[r("code",[e._v("icon-y-offset")]),e._v(": mapped as "),r("code",[e._v("icon.options.iconYOffset")]),e._v(" for "),r("code",[e._v("icon.fontAwesome")])])]),e._v(" "),r("p",[e._v("The mixin automatically registers defaults styling:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("markerStyle")]),e._v(" => will create a marker based on the following options merged with the following order of precedence\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/mapbox/simplestyle-spec",target:"_blank",rel:"noopener noreferrer"}},[e._v("simple style spec options"),r("OutboundLink")],1),e._v(" set on "),r("strong",[e._v("feature.style")]),e._v(" or "),r("strong",[e._v("feature.properties")])]),e._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/mapbox/simplestyle-spec",target:"_blank",rel:"noopener noreferrer"}},[e._v("simple style spec options"),r("OutboundLink")],1),e._v(" set on layer descriptor")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://leafletjs.com/reference.html#path-option",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet style options"),r("OutboundLink")],1),e._v(" set on the "),r("strong",[e._v("pointStyle")]),e._v(" property in the component")])])]),e._v(" "),r("li",[r("code",[e._v("featureStyle")]),e._v(" => will create a style based on the following options merged with the following order of precedence\n"),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/mapbox/simplestyle-spec",target:"_blank",rel:"noopener noreferrer"}},[e._v("simple style spec options"),r("OutboundLink")],1),e._v(" set on "),r("strong",[e._v("feature.style")]),e._v(" or "),r("strong",[e._v("feature.properties")])]),e._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/mapbox/simplestyle-spec",target:"_blank",rel:"noopener noreferrer"}},[e._v("simple style spec options"),r("OutboundLink")],1),e._v(" set on layer descriptor")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://leafletjs.com/reference.html#path-option",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet style options"),r("OutboundLink")],1),e._v(" set on the "),r("strong",[e._v("featureStyle")]),e._v(" property in the component")])])])]),e._v(" "),r("h2",{attrs:{id:"map-popup"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#map-popup"}},[e._v("#")]),e._v(" Map Popup")]),e._v(" "),r("p",[e._v("Make it possible to generate "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#popup",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet popups"),r("OutboundLink")],1),e._v(" based on GeoJson feature properties. Use "),r("strong",[e._v("register/unregisterStyle("),r("code",[e._v("popup")]),e._v(", generator)")]),e._v(" to (un)register a function "),r("strong",[e._v("f(feature, layer, options)")]),e._v(" returning a "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#popup",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet popup"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("The mixin automatically registers a default generator that will create a popup displaying a property name/value table based on the following options with the following order of precedence")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("popup")]),e._v(": set on "),r("strong",[e._v("feature.properties")]),e._v(" or layer descriptor or in the "),r("strong",[e._v("popup")]),e._v(" property of component options\n"),r("ul",[r("li",[r("strong",[e._v("pick")]),e._v(": array of property names to appear in the popup")]),e._v(" "),r("li",[r("strong",[e._v("omit")]),e._v(": array of property names not to appear in the popup")]),e._v(" "),r("li",[r("strong",[e._v("template")]),e._v(": "),r("a",{attrs:{href:"https://lodash.com/docs/#template",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lodash template"),r("OutboundLink")],1),e._v(" to generate popup content with "),r("code",[e._v("feature")]),e._v(", its "),r("code",[e._v("properties")]),e._v(" and translation function "),r("code",[e._v("$t")]),e._v(" as context")]),e._v(" "),r("li",[r("strong",[e._v("text")]),e._v(": text content of the popup, if provided will override default display")]),e._v(" "),r("li",[r("strong",[e._v("options")]),e._v(": Leaflet "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#popup-option",target:"_blank",rel:"noopener noreferrer"}},[e._v("popup options"),r("OutboundLink")],1)])])])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("If you want to disable a default popup configuration like "),r("code",[e._v("popup: { }")]),e._v(" (i.e. display all properties) on a per-layer basis you have to explicitely unset it on your layer options using "),r("code",[e._v("popup: null")]),e._v(" or "),r("code",[e._v("popup: false")]),e._v(".")])]),e._v(" "),r("h2",{attrs:{id:"map-tooltip"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#map-tooltip"}},[e._v("#")]),e._v(" Map Tooltip")]),e._v(" "),r("p",[e._v("Make it possible to generate "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#tooltip",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet tooltips"),r("OutboundLink")],1),e._v(" based on GeoJson feature properties. Use "),r("strong",[e._v("register/unregisterStyle("),r("code",[e._v("tooltip")]),e._v(", generator)")]),e._v(" to (un)register a function "),r("strong",[e._v("f(feature, layer, options)")]),e._v(" returning a "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#tooltip",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet tooltip"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("The mixin automatically registers a default generator that will create a tooltip based on the following options with the following order of precedence")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("tooltip")]),e._v(": set on "),r("strong",[e._v("feature.properties")]),e._v(" or layer descriptor or in the "),r("strong",[e._v("tooltip")]),e._v(" property of component options\n"),r("ul",[r("li",[r("strong",[e._v("property")]),e._v(": property name to appear in the tooltip")]),e._v(" "),r("li",[r("strong",[e._v("template")]),e._v(": "),r("a",{attrs:{href:"https://lodash.com/docs/#template",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lodash template"),r("OutboundLink")],1),e._v(" to generate tooltip content with "),r("code",[e._v("feature")]),e._v(", its "),r("code",[e._v("properties")]),e._v(" and translation function "),r("code",[e._v("$t")]),e._v(" as context")]),e._v(" "),r("li",[r("strong",[e._v("text")]),e._v(": text content of the tooltip, if provided will override default display")]),e._v(" "),r("li",[r("strong",[e._v("options")]),e._v(": Leaflet "),r("a",{attrs:{href:"https://leafletjs.com/reference.html#tooltip-option",target:"_blank",rel:"noopener noreferrer"}},[e._v("tooltip options"),r("OutboundLink")],1)])])])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("If you want to disable a default tooltip configuration like "),r("code",[e._v("tooltip: { property: 'name' }")]),e._v(" (i.e. display all properties) on a per-layer basis you have to explicitely unset it on your layer options using "),r("code",[e._v("tooltip: null")]),e._v(" or "),r("code",[e._v("tooltip: false")]),e._v(".")])]),e._v(" "),r("h2",{attrs:{id:"geojson-layer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#geojson-layer"}},[e._v("#")]),e._v(" GeoJson Layer")]),e._v(" "),r("p",[e._v("Make it possible to manage and style raw or time-based GeoJson map layers ("),r("a",{attrs:{href:"https://github.com/perliedman/leaflet-realtime",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet.Realtime plugin"),r("OutboundLink")],1),e._v(" is used under-the-hood):")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("createLeafletGeoJsonLayer(options)")]),e._v(" automatically registered GeoJson Leaflet layer constructor")]),e._v(" "),r("li",[r("strong",[e._v("updateLayer(name, geoJson, remove)")]),e._v(" update underlying GeoJson data of a given layer, if "),r("code",[e._v("remove")]),e._v(" is "),r("code",[e._v("true")]),e._v(" it will remove given features from the layer, otherwise it will add new ones found and update matching ones based on the "),r("code",[e._v("featureId")]),e._v(" option")])]),e._v(" "),r("div",{staticClass:"custom-block danger"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("The "),r("RouterLink",{attrs:{to:"/api/map/mixins.html#map-style"}},[e._v("style mixin")]),e._v(" is mandatory when using this mixin. If you'd like to support popups/tooltips you should also use the "),r("RouterLink",{attrs:{to:"/api/map/mixins.html#map-tooltip"}},[e._v("popup mixin")]),e._v(" and/or "),r("RouterLink",{attrs:{to:"/api/map/mixins.html#map-tooltip"}},[e._v("tooltip mixin")]),e._v(".")],1)]),e._v(" "),r("p",[e._v("If your component has a "),r("strong",[e._v("onLeafletFeature(feature, layer, options)")]),e._v(" method it will be called each time a new GeoJson feature is created.")]),e._v(" "),r("h3",{attrs:{id:"clustering"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#clustering"}},[e._v("#")]),e._v(" Clustering")]),e._v(" "),r("p",[e._v("Marker "),r("a",{attrs:{href:"https://github.com/Leaflet/Leaflet.markercluster#options",target:"_blank",rel:"noopener noreferrer"}},[e._v("clustering options"),r("OutboundLink")],1),e._v(" are to be provided in the "),r("strong",[e._v("cluster")]),e._v(" property of the Leaflet layer options or in the "),r("strong",[e._v("cluster")]),e._v(" property of component options, with this order of precedence. The following configuration illustrates a GeoJson marker cluster layer using options set on the layer descriptor (see image below):")]),e._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  name"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Layer'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  description"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'My sites'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  tags"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'business'")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  icon"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'star'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  attribution"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'(c) My company'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'OverlayLayer'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  leaflet"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'geoJson'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    source"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'https://s3.eu-central-1.amazonaws.com/kargo/nuclear-sites.json'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    cluster"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'marker-color'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'orange'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'icon-color'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'white'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'icon-classes'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'fa fa-star'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    popup"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      pick"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'NAME'")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    tooltip"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      property"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'LABEL'")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),r("p",[r("img",{attrs:{src:a(513),alt:"2D marker cluster"}})]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("If you want to disable a default clustering configuration like "),r("code",[e._v("cluster: { disableClusteringAtZoom: 18 }")]),e._v(" on a per-layer basis you have to explicitely unset it on your layer options using "),r("code",[e._v("cluster: null")]),e._v(" or "),r("code",[e._v("cluster: false")]),e._v(".")])]),e._v(" "),r("h3",{attrs:{id:"additional-feature-types"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#additional-feature-types"}},[e._v("#")]),e._v(" Additional feature types")]),e._v(" "),r("p",[e._v("The following options can be set as feature "),r("code",[e._v("properties")]),e._v(" to manage more geometry types:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("geodesic")]),e._v(" boolean set to "),r("code",[e._v("true")]),e._v(" on a "),r("code",[e._v("LineString")]),e._v(" will result in a geodesic line from the "),r("a",{attrs:{href:"https://github.com/henrythasler/Leaflet.Geodesic",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet.Geodesic"),r("OutboundLink")],1),e._v(" plugin")]),e._v(" "),r("li",[r("strong",[e._v("geodesic")]),e._v(" boolean set to "),r("code",[e._v("true")]),e._v(" on a "),r("code",[e._v("Point")]),e._v(" will result in a great circle from the "),r("a",{attrs:{href:"https://github.com/henrythasler/Leaflet.Geodesic",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet.Geodesic"),r("OutboundLink")],1),e._v(" plugin, which "),r("strong",[e._v("radius")]),e._v(" must be specified in meters")])]),e._v(" "),r("h3",{attrs:{id:"dynamic-styling"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dynamic-styling"}},[e._v("#")]),e._v(" Dynamic styling")]),e._v(" "),r("p",[e._v("Usually the same style is used for all features of a GeoJson layer, you might however require a more dynamic style base on each feature properties. To handle this use case you can either:")]),e._v(" "),r("ul",[r("li",[e._v("provide styling options for each feature in their "),r("code",[e._v("properties")]),e._v(" or "),r("code",[e._v("style")]),e._v(" field")]),e._v(" "),r("li",[e._v("use "),r("a",{attrs:{href:"https://lodash.com/docs/#template",target:"_blank",rel:"noopener noreferrer"}},[e._v("Lodash templating"),r("OutboundLink")],1),e._v(" on layer styling options with feature and its properties as context")])]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("Templating can only be efficient if compilers are created upfront, as a consequence you need to declare the list of templated options in your layer styling using the "),r("code",[e._v("template")]),e._v(" property.")])]),e._v(" "),r("p",[e._v("For instance you can change the marker color or image based on a given features's property like this:")]),e._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'marker-color'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("<% if (properties.visibility < 75) { %>#000000<% }\n                  else if (properties.visibility < 300) { %>#d20200<% }\n                  else if (properties.visibility < 1500) { %>#f9b40f<% }\n                  else if (properties.visibility < 3000) { %>#eef52f<% }\n                  else { %>#33c137<% } %>")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'marker-symbol'")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("<% if (properties.visibility < 75) { %>/statics/windyblack.png<% }\n                    else if (properties.visibility < 300) { %>/statics/windyred.png<% }\n                    else if (properties.visibility < 1500) { %>/statics/windyorange.png<% }\n                    else if (properties.visibility < 3000) { %>/statics/windyyellow.png<% }\n                    else { %>/statics/windygreen.png<% } %>")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")])]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\ntemplate"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'marker-color'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'marker-symbol'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),r("p",[e._v("You can also draw a path with a different styling on each part like this:")]),e._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'FeatureCollection'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  features"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Feature'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    properties"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" stroke"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'#000000'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" weight"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    geometry"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'LineString'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" coordinates"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("...")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Feature'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    properties"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" stroke"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'#FF00FF'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" weight"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    geometry"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'LineString'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" coordinates"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("...")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),r("h2",{attrs:{id:"edit-layer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#edit-layer"}},[e._v("#")]),e._v(" Edit Layer")]),e._v(" "),r("p",[e._v("Make it possible to edit features of a "),r("RouterLink",{attrs:{to:"/api/map/map-mixins.html#geojson-layer"}},[e._v("GeoJson layer")]),e._v(" (geometry and properties):")],1),e._v(" "),r("ul",[r("li",[r("strong",[e._v("editLayer(name)")]),e._v(" start/stop layer edition on a given layer")]),e._v(" "),r("li",[r("strong",[e._v("updateFeatureProperties(feature, layer, leafletLayer)")]),e._v(" update feature properties action handler that will open an "),r("RouterLink",{attrs:{to:"/api/core/components.html#editors"}},[e._v("editor")]),e._v(" to define feature properties")],1)]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("It has to be used with the GeoJson layer mixin and will use the configured styling.")])]),e._v(" "),r("h2",{attrs:{id:"file-layer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#file-layer"}},[e._v("#")]),e._v(" File Layer")]),e._v(" "),r("p",[e._v("Make it possible to drag'n'drop GeoJson or KML file on the map ("),r("a",{attrs:{href:"https://github.com/makinacorpus/Leaflet.FileLayer",target:"_blank",rel:"noopener noreferrer"}},[e._v("Leaflet.FileLayer plugin"),r("OutboundLink")],1),e._v(" is used under-the-hood). It will automatically create a new "),r("RouterLink",{attrs:{to:"/api/map/map-mixins.html#geojson-layer"}},[e._v("GeoJson layer")]),e._v(" named after the filename on drop. As a consequence it has to be used with the GeoJson layer mixin and will use the configured styling.")],1),e._v(" "),r("h2",{attrs:{id:"forecast-layer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#forecast-layer"}},[e._v("#")]),e._v(" Forecast Layer")]),e._v(" "),r("p",[e._v("Make it possible to manage "),r("a",{attrs:{href:"https://weacast.github.io/weacast-docs/api/layers.html#forecast-data-layers",target:"_blank",rel:"noopener noreferrer"}},[e._v("Weacast map layers"),r("OutboundLink")],1),e._v(":")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("createLeafletForecastLayer(options)")]),e._v(" automatically registered Weacast Leaflet layer constructor")])]),e._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("This mixin assumes that your component has initialized its "),r("a",{attrs:{href:"https://weacast.github.io/weacast-docs/api/application.html#client-setup",target:"_blank",rel:"noopener noreferrer"}},[e._v("Weacast client"),r("OutboundLink")],1),e._v(" in the "),r("code",[e._v("weacastApi")]),e._v(" property by using e.g. the "),r("RouterLink",{attrs:{to:"/api/map/mixins.html#weacast"}},[e._v("Weacast mixin")])],1)]),e._v(" "),r("h2",{attrs:{id:"canvas-layer"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#canvas-layer"}},[e._v("#")]),e._v(" Canvas Layer")]),e._v(" "),r("p",[e._v("Make it possible to draw custom graphic elements on top of other layers using HTML canvas elements. These custom graphic elements are defined by their draw function and are run in the client application, using a controlled draw context. It is not possible for these draw functions to access anything outside the specified context.")]),e._v(" "),r("ul",[r("li",[r("p",[r("strong",[e._v("createLeafletCanvasLayer (options)")]),e._v(" is automatically registered to allow creation of such Leaflet layer. The following fields can be set on the "),r("strong",[e._v("options")]),e._v(" object:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("draw")]),e._v(" an array containing the same information as given to "),r("strong",[e._v("setCanvasLayerDrawCode")]),e._v(" "),r("strong",[e._v("drawCode")]),e._v(" parameter.")]),e._v(" "),r("li",[r("strong",[e._v("userData")]),e._v(" an object containing user data that'll be usable in the draw code.")]),e._v(" "),r("li",[r("strong",[e._v("autoRedraw")]),e._v(" boolean set to true if the canvas should automatically be redrawn every frame.")]),e._v(" "),r("li",[r("strong",[e._v("pointerEventsEnabled")]),e._v(" boolean set to true to enable pointer events on the canvas layer (required if you use clickable elements).")]),e._v(" "),r("li",[r("strong",[e._v("clickThroughEnabled")]),e._v(" boolean set to true to allow click events to go through the canvas layer when no clickable elements were clicked (requires "),r("strong",[e._v("pointerEventsEnabled")]),e._v(" to work).")])])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("setCanvasLayerDrawCode (layerName, drawCode, autoRedraw)")]),e._v(" define the draw code used by the layer named "),r("code",[e._v("layerName")]),e._v(". "),r("code",[e._v("autoRedraw")]),e._v(" is a boolean used to enable automatic refresh of the layer at each displayed frame (required eg. to animate elements). "),r("code",[e._v("drawCode")]),e._v(" is expected to be an array of objects where each object is of the following form :")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("{ feature: 'LAYER_NAME?FEATURE_NAME', code: '... some javascript draw code ...' }")]),e._v(" will run the given draw code only for the feature named "),r("code",[e._v("FEATURE_NAME")]),e._v(" in the layer named "),r("code",[e._v("LAYER_NAME")]),e._v(".")]),e._v(" "),r("li",[r("code",[e._v("{ layer: 'LAYER_NAME', code: '... some javascript draw code ...' }")]),e._v(" will run the given draw code for each feature of the layer named "),r("code",[e._v("LAYER_NAME")]),e._v(".")])])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("setCanvasLayerUserData (layerName, userData)")]),e._v(" is used to add some custom user data to the draw context. The "),r("code",[e._v("userData")]),e._v(" object parameter will be merged into the "),r("code",[e._v("userData")]),e._v(" object available on the draw context. This allows users to push partial updates, there's no need to push the whole user data every time a single member changes.")])]),e._v(" "),r("li",[r("p",[r("strong",[e._v("setCanvasLayerAutoRedraw (layerName, autoRedraw)")]),e._v(" is used to enable or disable automatic redraw of the canvas layer named "),r("code",[e._v("layerName")]),e._v(". Automatic redraw may be required for example when animating objects. By default automatic redraw is off, which means that the canvas layer will only redraw when :")]),e._v(" "),r("ul",[r("li",[e._v("the user moves the map")]),e._v(" "),r("li",[r("code",[e._v("setCanvasLayerDrawCode")]),e._v(" is called")]),e._v(" "),r("li",[r("code",[e._v("setCanvasLayerUserData")]),e._v(" is called")])])])]),e._v(" "),r("p",[e._v("The following configuration illustrates a layer used to draw feature property "),r("strong",[e._v("name")]),e._v(" as text at the feature position for all features of the layer named "),r("strong",[e._v("Airports")]),e._v(".")]),e._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  name"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'AirportNames'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'OverlayLayer'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  icon"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'local_airport'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  leaflet"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    type"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'kanvasLayer'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    isVisible"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    draw"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n      layer"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'Airports'")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" code"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token template-string"}},[r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")]),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("\n        const props = ctx.feature.properties\n        const coords = {\n          lat: ctx.feature.geometry.coordinates[1],\n          lon: ctx.feature.geometry.coordinates[0]\n        }\n\n        const pos = ctx.latLonToCanvas(coords)\n        ctx.canvas.font = '10px sans-serif'\n        ctx.canvas.fillStyle = '#ffb300'\n        ctx.canvas.fillText(ctx.feature.properties.name, pos.x, pos.y)\n      ")]),r("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")])]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),r("p",[e._v("The "),r("code",[e._v("ctx")]),e._v(" object is the draw context and is the only object available from the draw code.")]),e._v(" "),r("p",[e._v("By default, the following fields are available on the draw context :")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("canvas")]),e._v(" the canvas rendering interface by which the drawing will occur. Draw api is available "),r("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("li",[r("strong",[e._v("now")]),e._v(" the time of the draw function call, can be useful to animate things.")]),e._v(" "),r("li",[r("strong",[e._v("zoom")]),e._v(" the current map zoom value.")]),e._v(" "),r("li",[r("strong",[e._v("latLonToCanvas (coords)")]),e._v(" project from latitude/longitude to canvas coordinates (pixels).")]),e._v(" "),r("li",[r("strong",[e._v("addClickableFeature (geojson, path, clickStyle)")]),e._v(" add a clickable "),r("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Path2D",target:"_blank",rel:"noopener noreferrer"}},[e._v("path element"),r("OutboundLink")],1),e._v(" associated with the "),r("code",[e._v("geojson")]),e._v(" feature. When clicked, it will emit a 'clicked' event with the associated feature as event data.")]),e._v(" "),r("li",[r("strong",[e._v("clearClickableFeatures ()")]),e._v(" clear all the clickable features that have been added so far.")]),e._v(" "),r("li",[r("strong",[e._v("userData")]),e._v(" object where all the user data pushed through "),r("code",[e._v("setCanvasLayerUserData")]),e._v(" has been merged.")]),e._v(" "),r("li",[r("strong",[e._v("vec2 (a, b)")]),e._v(" build a vec2 object from two points (where points and vec2 are objects with "),r("code",[e._v("x")]),e._v(" and "),r("code",[e._v("y")]),e._v(" members ).")]),e._v(" "),r("li",[r("strong",[e._v("len2 (vec)")]),e._v(" compute length of a vec2 vector.")]),e._v(" "),r("li",[r("strong",[e._v("scale2 (vec, value)")]),e._v(" scale a vec2 vector by "),r("code",[e._v("value")]),e._v(".")]),e._v(" "),r("li",[r("strong",[e._v("norm2 (vec)")]),e._v(" return the corresponding normalized vec2 vector.")])]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),r("p",[e._v("It is possible to extend what's available in the draw context from the application using the "),r("code",[e._v("CanvasDrawContext")]),e._v(" singleton. In this case you should call "),r("code",[e._v("CanvasDrawContext.merge(contextAdditionObject)")]),e._v(" to merge the content of "),r("code",[e._v("contextAdditionObject")]),e._v(" with the draw context. This call must be done before the canvas layer mixin is created. This can be useful to build an application specific library of draw functions and make these available to the canvas layer instances.")])]),e._v(" "),r("h2",{attrs:{id:"map-activity"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#map-activity"}},[e._v("#")]),e._v(" Map Activity")]),e._v(" "),r("p",[e._v("Make it easier to create 2D mapping activities:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("initializeMap()")]),e._v(" setup the mapping engine, "),r("strong",[e._v("should be called first before any other method")])]),e._v(" "),r("li",[r("strong",[e._v("finalizeMap()")]),e._v(" destroy the mapping engine")])]),e._v(" "),r("div",{staticClass:"custom-block danger"},[r("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),r("p",[e._v("It assumes that the DOM element used by the render engine has a ref named "),r("code",[e._v("map")])])])])}),[],!1,null,null,null);t.default=s.exports}}]);